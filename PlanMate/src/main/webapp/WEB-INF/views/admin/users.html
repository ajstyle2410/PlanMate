<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin Users - PlanMate</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-slate-100 text-gray-900">
<div class="min-h-screen">
  <header class="bg-white shadow-sm">
    <div class="mx-auto flex max-w-6xl items-center justify-between px-6 py-4">
      <h1 class="text-2xl font-bold text-blue-700">User Management</h1>
      <nav class="flex items-center space-x-4 text-sm font-medium">
        <a href="/admin" class="hover:text-blue-600">Dashboard</a>
        <a href="/admin/users" class="text-blue-600">Users</a>
        <a href="/admin/trips" class="hover:text-blue-600">Trips</a>
        <a href="/" class="rounded-md border border-blue-600 px-3 py-1 text-blue-600 hover:bg-blue-600 hover:text-white">Back to Site</a>
      </nav>
    </div>
  </header>

  <main class="mx-auto max-w-6xl px-6 py-8">
    <section class="rounded-xl bg-white p-6 shadow-sm">
      <div class="flex flex-col gap-4 md:flex-row md:items-center md:justify-between">
        <div>
          <h2 class="text-xl font-semibold text-blue-700">Registered Users</h2>
          <p class="text-sm text-gray-500" th:text="${users.size()} + ' total records'">0 total records</p>
        </div>
        <div class="flex flex-col gap-2 sm:flex-row">
          <input type="search" placeholder="Search name or email" oninput="filterTable(event)" class="w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-200" />
        </div>
      </div>

      <div class="mt-6 overflow-x-auto">
        <table class="min-w-full divide-y divide-slate-200 text-sm" id="users-table">
          <thead class="bg-slate-50 text-xs uppercase tracking-wide text-gray-500">
            <tr>
              <th class="px-4 py-2 text-left">Full Name</th>
              <th class="px-4 py-2 text-left">Username</th>
              <th class="px-4 py-2 text-left">Email</th>
              <th class="px-4 py-2 text-left">Trips</th>
            </tr>
          </thead>
          <tbody class="divide-y divide-slate-200" th:if="${#lists.isEmpty(users)}">
            <tr>
              <td colspan="4" class="px-4 py-6 text-center text-sm text-gray-500">No users found.</td>
            </tr>
          </tbody>
          <tbody class="divide-y divide-slate-200" th:if="${!#lists.isEmpty(users)}">
            <tr th:each="user : ${users}">
              <td class="px-4 py-3 font-medium text-gray-900" th:text="${user.fullname != null ? user.fullname : '—'}">Full Name</td>
              <td class="px-4 py-3" th:text="${user.username}">username</td>
              <td class="px-4 py-3" th:text="${user.email}">email</td>
              <td class="px-4 py-3" th:text="${user.trips != null ? user.trips.size() : 0}">0</td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>
  </main>
</div>

<script>
  function filterTable(event) {
    const term = event.target.value.toLowerCase();
    document.querySelectorAll('#users-table tbody:last-of-type tr').forEach(row => {
      const text = row.innerText.toLowerCase();
      row.style.display = text.includes(term) ? '' : 'none';
    });
  }
</script>
</body>
</html>

