<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
<meta charset="UTF-8">
<title>Trip Details</title>
<script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-[#f8f7ff] text-[#012a4a] min-h-screen flex flex-col">

	<header
		class="bg-[#003049] text-white p-4 shadow-md flex justify-between items-center">
		<h1 class="text-2xl font-bold">Trip Plan Details</h1>
		<a th:href="@{/}" class="text-sm hover:underline">Back to Plans</a>
	</header>

	<main class="flex flex-1">
		<section class="w-3/4 p-6 space-y-6">
			<div class="bg-white p-6 rounded-xl shadow-lg">
				<h2 class="text-3xl font-bold mb-2" th:text="${trip.title}">Trip
					Title</h2>
				<p class="text-gray-600 mb-4" th:text="${trip.description}">
					Trip description goes here...</p>

				<ul class="grid grid-cols-2 gap-4 text-gray-700">
					<li><span class="font-semibold">Start Date:</span> <span
						th:text="${#temporals.format(trip.startDate, 'dd MMM yyyy')}">2025-11-12</span>
					</li>
					<li><span class="font-semibold">End Date:</span> <span
						th:text="${#temporals.format(trip.endDate, 'dd MMM yyyy')}">2025-11-16</span>
					</li>
					<li><span class="font-semibold">Budget:</span> <span
						th:text="${trip.budget}">0</span></li>
					<li><span class="font-semibold">Created By:</span> <span
						th:text="${trip.uploadedby}">Planner</span></li>
					<li class="col-span-2"> <span th:text="${trip.status}"
						th:classappend="${trip.status == 'ACTIVE' ? 'bg-green-100 text-green-700' : 
                       (trip.status == 'DRAFT' ? 'bg-yellow-100 text-yellow-700' : 
                       'bg-gray-100 text-gray-700')}">
					</span> </li>
				</ul>

				<div class="mt-6">
					<button id="interestBtn"
						class="px-4 py-2 bg-[#003049] text-white rounded-lg hover:bg-[#012a4a] transition">
						I'm Interested</button>
				</div>
			</div>

			<div class="bg-white p-6 rounded-xl shadow-lg">
				<h3 class="text-xl font-bold mb-3">Discussion</h3>
				<div id="chatBox"
					class="h-48 overflow-y-auto border rounded-lg p-3 bg-gray-50">
					<p class="text-gray-600">Welcome to the trip discussion!</p>
				</div>
				<div class="mt-3 flex gap-2">
					<input id="chatInput" type="text" placeholder="Type a message..."
						class="flex-1 border rounded-lg px-3 py-2 focus:ring-2 focus:ring-[#003049] outline-none">
					<button id="sendBtn"
						class="px-4 py-2 bg-[#003049] text-white rounded-lg hover:bg-[#012a4a]">
						Send</button>
				</div>
			</div>
		</section>

		<aside
			class="w-1/4 bg-[#012a4a] text-white p-6 flex flex-col rounded-l-xl shadow-lg">
			<h3 class="text-xl font-bold mb-4">Interested Users</h3>
			<ul id="interestedList" class="space-y-2">
				<li class="bg-[#003049] px-3 py-2 rounded-lg"
					th:text="${trip.uploadedby}">Planner</li>
			</ul>
		</aside>
	</main>

	<footer class="bg-[#003049] text-white p-4 text-center">
		&copy; 2025 PlanMate. All Rights Reserved. </footer>

	<script>
    const interestBtn = document.getElementById("interestBtn");
    if (interestBtn) {
        const interestedList = document.getElementById("interestedList");
        const currentUser = "You";
        interestBtn.addEventListener("click", () => {
            const li = document.createElement("li");
            li.textContent = currentUser;
            li.className = "bg-[#003049] px-3 py-2 rounded-lg";
            interestedList.appendChild(li);
            interestBtn.disabled = true;
            interestBtn.textContent = "Interested";
            interestBtn.classList.add("opacity-70");
        });
    }

    const chatInput = document.getElementById("chatInput");
    const chatBox = document.getElementById("chatBox");
    const sendBtn = document.getElementById("sendBtn");

    if (sendBtn) {
        sendBtn.addEventListener("click", () => {
            const msg = chatInput.value.trim();
            if (msg !== "") {
                const p = document.createElement("p");
                p.textContent = `You: ${msg}`;
                p.className = "text-gray-800";
                chatBox.appendChild(p);
                chatInput.value = "";
                chatBox.scrollTop = chatBox.scrollHeight;
            }
        });
    }
</script>

</body>
</html>